name: MÃY CHá»¦ PREMIUM Cá»¦A HEROGOODBOYVN

on:
  workflow_dispatch:
    inputs:
      run_minutes:
        description: 'Chá»n thá»i gian cháº¡y (tÃ­nh theo phÃºt)'
        required: true
        type: choice
        options: ['60', '120', '180', '240', '300', '360']  # 1h Ä‘áº¿n 6h
        default: '60'  # Máº·c Ä‘á»‹nh 1 giá»

jobs:
  premium-rdp:
    runs-on: windows-latest
    timeout-minutes: ${{ inputs.run_minutes + 20 }}  # +20 phÃºt dÆ° cho setup an toÃ n

    steps:
      - name: ğŸš€ Khá»Ÿi Äá»™ng MÃ¡y Chá»§ Premium ğŸš€
        run: |
          \( hours = [math]::Round( \){inputs.run_minutes} / 60, 1)
          Write-Host "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—" -ForegroundColor Cyan
          Write-Host "â•‘   ğŸŒŸğŸ”¥ MÃY CHá»¦ PREMIUM CHÃNH CHá»¦ HEROGOODBOYVN ğŸ”¥ğŸŒŸ   â•‘" -ForegroundColor Magenta
          Write-Host "â•‘   â±ï¸  Thá»i gian cháº¡y: $hours giá»                        â•‘" -ForegroundColor Green
          Write-Host "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor Cyan

      - name: Táº£i Ngrok
        run: |
          Invoke-WebRequest https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-windows-amd64.zip -OutFile ngrok.zip
          Expand-Archive ngrok.zip -DestinationPath .
          .\ngrok\ngrok.exe authtoken ${{ secrets.NGROK_AUTH_TOKEN }}

      - name: Báº­t RDP, Táº¡o User & Tá»‘i Æ¯u HoÃ n ToÃ n
        run: |
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server' -Name "fDenyTSConnections" -Value 0
          Enable-NetFirewallRule -DisplayGroup "Remote Desktop"

          $user = "HEROGOODBOYVN"
          \( pass = " \){{ secrets.RDP_PASSWORD || 'Nguyen2009' }}"

          if (-Not (Get-LocalUser -Name $user -ErrorAction SilentlyContinue)) {
            New-LocalUser -Name $user -Password (ConvertTo-SecureString $pass -AsPlainText -Force) -FullName "HEROGOODBOYVN Premium"
            Add-LocalGroupMember -Group "Administrators" -Member $user
            Add-LocalGroupMember -Group "Remote Desktop Users" -Member $user
            Write-Host "ğŸ‰ Táº¡o user HEROGOODBOYVN thÃ nh cÃ´ng!" -ForegroundColor Green
          } else {
            $securePass = ConvertTo-SecureString $pass -AsPlainText -Force
            Set-LocalUser -Name $user -Password $securePass
            Write-Host "ğŸ‰ Cáº­p nháº­t password HEROGOODBOYVN ok!" -ForegroundColor Green
          }

          powercfg -setactive SCHEME_MIN
          Set-ItemProperty -Path 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Themes\Personalize' -Name "EnableTransparency" -Value 0
          Set-ItemProperty -Path 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced' -Name "TaskbarAnimations" -Value 0
          Stop-Service -Name "SysMain" -Force -ErrorAction SilentlyContinue
          Stop-Service -Name "DiagTrack" -Force -ErrorAction SilentlyContinue

          Remove-Item -Path "$env:TEMP\*" -Recurse -Force -ErrorAction SilentlyContinue
          Remove-Item -Path "C:\Windows\Temp\*" -Recurse -Force -ErrorAction SilentlyContinue
          Clear-RecycleBin -Force -ErrorAction SilentlyContinue

          Write-Host "ğŸ‰ Tá»‘i Æ°u + dá»n rÃ¡c hoÃ n táº¥t - MÃ¡y sáº¡ch sáº½, mÆ°á»£t mÃ !" -ForegroundColor Green

      - name: ğŸ‰ Táº¡o Tunnel & ThÃ´ng Tin Káº¿t Ná»‘i Premium ğŸ‰
        run: |
          Start-Process -FilePath ".\ngrok\ngrok.exe" -ArgumentList "tcp 3389 --log=stdout" -NoNewWindow
          Start-Sleep -Seconds 60

          $tunnel = Invoke-RestMethod http://localhost:4040/api/tunnels
          $host_port = ($tunnel.tunnels | Where-Object { $_.proto -eq "tcp" }).public_url -replace 'tcp://',''

          \( hours = [math]::Round( \){inputs.run_minutes} / 60, 1)

          Write-Host ""
          Write-Host "ğŸŒŒâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨ğŸŒŒ" -ForegroundColor Cyan
          Write-Host "   ğŸš€ğŸ”¥ MÃY CHá»¦ PREMIUM HEROGOODBOYVN ÄÃƒ Sáº´N SÃ€NG! ğŸ”¥ğŸš€   " -ForegroundColor Magenta
          Write-Host "   ğŸ‘‘ Chá»§ chÃ­nh: HEROGOODBOYVN - MÃ¡y tá»‘i Æ°u hoÃ n toÃ n! ğŸ‘‘   " -ForegroundColor Yellow
          Write-Host "ğŸŒŒâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨ğŸŒŒ" -ForegroundColor Cyan
          Write-Host ""

          Write-Host "    ğŸ®ğŸ”¥ THÃ”NG TIN Káº¾T Ná»I PREMIUM ğŸ”¥ğŸ®" -ForegroundColor Cyan
          Write-Host "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—" -ForegroundColor White
          Write-Host "â•‘  ğŸ“ Address (Host + Port): $host_port          â•‘" -ForegroundColor Yellow
          Write-Host "â•‘  ğŸ‘¤ Username:             HEROGOODBOYVN             â•‘" -ForegroundColor Yellow
          Write-Host "â•‘  ğŸ”‘ Password:             Nguyen2009                â•‘" -ForegroundColor Yellow
          Write-Host "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor White
          Write-Host ""

          Write-Host "ğŸ“± HÆ¯á»šNG DáºªN Káº¾T Ná»I CHI TIáº¾T (ÄIá»†N THOáº I HOáº¶C PC):" -ForegroundColor Cyan
          Write-Host "   â€¢ Táº¢I APP:"
          Write-Host "      - Android: 'Windows App' trÃªn Google Play"
          Write-Host "      - iPhone: 'Windows App Mobile' trÃªn App Store"
          Write-Host "      - PC: DÃ¹ng 'Remote Desktop Connection' (gÃµ mstsc)"
          Write-Host ""
          Write-Host "   â€¢ Káº¾T Ná»I:"
          Write-Host "      1. Má»Ÿ app â†’ Nháº¥n + (Add PC)"
          Write-Host "      2. DÃ¡n Address Ä‘áº§y Ä‘á»§ (cÃ³ port)"
          Write-Host "      3. Username: HEROGOODBOYVN"
          Write-Host "      4. Password: Nguyen2009"
          Write-Host "      5. Connect â†’ Náº¿u cáº£nh bÃ¡o chá»©ng chá»‰ â†’ Nháº¥n Continue"
          Write-Host "      6. VÃ o Windows chÆ¡i vui váº» ngay! ğŸ‰"
          Write-Host ""

          Write-Host "ğŸ’ MÃ¡y Ä‘Ã£ Ä‘Æ°á»£c tá»‘i Æ°u hoÃ n toÃ n - YouTube, nghe nháº¡c, lÆ°á»›t web mÆ°á»£t mÃ !" -ForegroundColor Magenta
          Write-Host ""
          Write-Host "        ğŸ‰ CHÃšC Má»ŒI NGÆ¯á»œI CHÆ I WINDOWS VUI Váºº! ğŸ‰" -ForegroundColor Magenta
          Write-Host "                   Powered by HEROGOODBOYVN Premium âœ¨ğŸš€"
          Write-Host ""

      - name: Giá»¯ mÃ¡y chá»§ cháº¡y & Tá»± Shutdown
        run: |
          \( hours = [math]::Round( \){inputs.run_minutes} / 60, 1)
          Write-Host "ğŸ›¡ï¸ MÃ¡y chá»§ premium Ä‘ang cháº¡y á»•n Ä‘á»‹nh $hours giá»... ChÆ¡i Windows vui váº» nha má»i ngÆ°á»i! ğŸ›¡ï¸" -ForegroundColor Green
          Start-Sleep -Seconds ${inputs.run_minutes * 60}
          Write-Host "â° Háº¿t thá»i gian - MÃ¡y chá»§ tá»± shutdown! Háº¹n gáº·p láº¡i! ğŸ‘‹" -ForegroundColor Red
