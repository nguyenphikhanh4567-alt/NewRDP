name: MÃY CHá»¦ PREMIUM Cá»¦A HEROGOODBOYVN

on:
  workflow_dispatch:
    inputs:
      run_hours:
        description: 'Chá»n thá»i gian cháº¡y (1-6 giá»)'
        required: true
        type: choice
        options: ['1', '2', '3', '4', '5', '6']
        default: '1'

jobs:
  premium-rdp:
    runs-on: windows-latest
    timeout-minutes: ${{ (inputs.run_hours || 1) * 60 }}

    steps:
      - name: Khá»Ÿi Äá»™ng MÃ¡y Chá»§ Premium
        run: |
          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘   ğŸ”¥ MÃY CHá»¦ PREMIUM HEROGOODBOYVN ğŸ”¥     â•‘"
          echo "â•‘   â±ï¸ Thá»i gian: ${{ inputs.run_hours || 1 }} giá»          â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

      - name: Táº£i Ngrok
        run: |
          Invoke-WebRequest https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-windows-amd64.zip -OutFile ngrok.zip
          Expand-Archive ngrok.zip -DestinationPath .
          .\ngrok\ngrok.exe authtoken ${{ secrets.NGROK_AUTH_TOKEN }}

      - name: Báº­t RDP & Táº¡o User + Tá»‘i Æ¯u
        run: |
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server' -Name "fDenyTSConnections" -Value 0
          Enable-NetFirewallRule -DisplayGroup "Remote Desktop"

          net user HEROGOODBOYVN ${{ secrets.RDP_PASSWORD || 'Nguyen2009' }} /add
          net localgroup administrators HEROGOODBOYVN /add
          net localgroup "Remote Desktop Users" HEROGOODBOYVN /add

          powercfg -setactive SCHEME_MIN
          Remove-Item -Path "$env:TEMP\*" -Recurse -Force -ErrorAction SilentlyContinue
          echo "User + Tá»‘i Æ°u + Dá»n rÃ¡c xong - MÃ¡y mÆ°á»£t max!"

      - name: Táº¡o Tunnel & ThÃ´ng Tin Káº¿t Ná»‘i
        run: |
          Start-Process -FilePath ".\ngrok\ngrok.exe" -ArgumentList "tcp 3389 --log=stdout" -NoNewWindow
          Start-Sleep -Seconds 60

          $tunnel = Invoke-RestMethod http://localhost:4040/api/tunnels
          $host_port = ($tunnel.tunnels | Where-Object { $_.proto -eq "tcp" }).public_url -replace 'tcp://',''

          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘   ğŸ‰ MÃY CHá»¦ PREMIUM Sáº´N SÃ€NG! ğŸ‰         â•‘"
          echo "â•‘   ğŸ“ Address: $host_port                  â•‘"
          echo "â•‘   ğŸ‘¤ Username: HEROGOODBOYVN              â•‘"
          echo "â•‘   ğŸ”‘ Password: Nguyen2009                 â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "Connect báº±ng Microsoft Remote Desktop ngay boss Æ¡i! ğŸš€"

      - name: Giá»¯ mÃ¡y chá»§ cháº¡y
        run: Start-Sleep -Seconds ${{ (inputs.run_hours || 1) * 3600 }}
