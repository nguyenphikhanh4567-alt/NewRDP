# Äá»•i tÃªn file nÃ y thÃ nh: may-chu-premium-herogoodboyvn.yml
# Hoáº·c Ä‘áº¹p hÆ¡n: ğŸš€-may-chu-premium-cua-herogoodboyvn.yml (copy paste emoji tháº­t nha boss)

name: MÃY CHá»¦ PREMIUM Cá»¦A HEROGOODBOYVN  # Key nÃ y dÃ¹ng cho run name chi tiáº¿t

on:
  workflow_dispatch:
    inputs:
      run_hours:
        description: 'Chá»n thá»i gian mÃ¡y chá»§ cháº¡y (1-6 giá»)'
        required: true
        type: choice
        options: ['1', '2', '3', '4', '5', '6']
        default: '1'

jobs:
  premium-rdp-server:
    name: ğŸš€ MÃ¡y Chá»§ Premium HEROGOODBOYVN - Windows 11 Style RDP
    runs-on: windows-latest
    timeout-minutes: ${{ (inputs.run_hours || 1) * 60 }}

    env:
      ORIGINAL_OWNER: HEROGOODBOYVN
      RDP_USERNAME: HEROGOODBOYVN

    steps:
      - name: Khá»Ÿi Äá»™ng MÃ¡y Chá»§ Premium
        run: |
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "   MÃY CHá»¦ PREMIUM CHÃNH CHá»¦: $env:ORIGINAL_OWNER   "
          echo "   Thá»i gian cháº¡y: ${{ inputs.run_hours || 1 }} giá»   "
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

      - name: Táº£i vÃ  cÃ i Ngrok (tunnel RDP)
        run: |
          Invoke-WebRequest https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-windows-amd64.zip -OutFile ngrok.zip
          Expand-Archive ngrok.zip -DestinationPath .
          .\ngrok\ngrok.exe authtoken ${{ secrets.NGROK_AUTH_TOKEN }} || echo "Lá»–I TOKEN NGROK - Check secret NGROK_AUTH_TOKEN nha boss!"

      - name: Báº­t Remote Desktop & Tá»‘i Æ¯u Hiá»‡u Suáº¥t
        run: |
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server' -Name "fDenyTSConnections" -Value 0
          Enable-NetFirewallRule -DisplayGroup "Remote Desktop"
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -Name "UserAuthentication" -Value 1

          $username = "$env:RDP_USERNAME"
          \( password = " \){{ secrets.RDP_PASSWORD || 'Nguyen2009' }}"

          if (-Not (Get-LocalUser -Name $username -ErrorAction SilentlyContinue)) {
            New-LocalUser -Name $username -Password (ConvertTo-SecureString $password -AsPlainText -Force) -FullName "HEROGOODBOYVN Premium"
            Add-LocalGroupMember -Group "Administrators" -Member $username
            Add-LocalGroupMember -Group "Remote Desktop Users" -Member $username
            echo "Táº¡o user premium: $username thÃ nh cÃ´ng!"
          } else {
            net user $username $password
            echo "Cáº­p nháº­t password cho $username ok!"
          }

          powercfg -setactive SCHEME_MIN
          Set-ItemProperty -Path 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Themes\Personalize' -Name "EnableTransparency" -Value 0
          Set-ItemProperty -Path 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced' -Name "TaskbarAnimations" -Value 0
          Stop-Service -Name "SysMain" -Force -ErrorAction SilentlyContinue
          echo "Tá»‘i Æ°u xong - mÃ¡y siÃªu mÆ°á»£t nghe nháº¡c chill!"

      - name: Khá»Ÿi cháº¡y Ngrok & Hiá»ƒn Thá»‹ ThÃ´ng Tin Káº¿t Ná»‘i Äáº¸P LUNG LINH âœ¨
        run: |
          Start-Process -FilePath ".\ngrok\ngrok.exe" -ArgumentList "tcp 3389 --log=stdout" -NoNewWindow
          echo "Äang táº¡o tunnel premium... Chá» 40 giÃ¢y cho cháº¯c Äƒn nha boss ğŸš€"
          Start-Sleep -Seconds 40

          try {
            $tunnel = Invoke-RestMethod http://localhost:4040/api/tunnels -ErrorAction Stop
            $public_url = ($tunnel.tunnels | Where-Object { $_.proto -eq "tcp" }).public_url
            if (!$public_url) { echo "Lá»–I: KhÃ´ng láº¥y Ä‘Æ°á»£c tunnel - Cháº¡y láº¡i workflow Ä‘i boss!"; exit 1 }
            $host_port = $public_url -replace 'tcp://', ''
          } catch {
            echo "Lá»–I NGROK: Token sai hoáº·c chÆ°a cháº¡y. Check secret NGROK_AUTH_TOKEN ngay!"
            exit 1
          }

          $rdp_user = "$env:RDP_USERNAME"
          \( rdp_pass = " \){{ secrets.RDP_PASSWORD || 'Nguyen2009' }}"
          \( running_time = " \){{ inputs.run_hours || 1 }}"

          Write-Host ""
          Write-Host "ğŸŒŒâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨ğŸŒŒ" -ForegroundColor Cyan
          Write-Host "   ğŸ”¥ MÃY CHá»¦ PREMIUM CHÃNH CHá»¦: HEROGOODBOYVN ğŸ”¥   " -ForegroundColor Magenta
          Write-Host "   ğŸ® Server tá»± xÃ¢y dá»±ng & tá»‘i Æ°u hoÃ n toÃ n! ğŸ®   " -ForegroundColor Yellow
          Write-Host "ğŸŒŒâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨ğŸŒŒ" -ForegroundColor Cyan
          Write-Host ""

          Write-Host "    ğŸ‘‘ CHá»¦ Sá» Há»®U: $env:ORIGINAL_OWNER ğŸ‘‘" -ForegroundColor Yellow
          Write-Host "         â±ï¸  Thá»i gian hoáº¡t Ä‘á»™ng: $running_time giá»" -ForegroundColor Green
          Write-Host ""

          Write-Host "          ğŸ®ğŸ”¥ THÃ”NG TIN Káº¾T Ná»I ğŸ”¥ğŸ®" -ForegroundColor Cyan
          Write-Host "    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—" -ForegroundColor White
          Write-Host "    â•‘  ğŸ“ Address (Host):   $host_port          â•‘" -ForegroundColor Yellow
          Write-Host "    â•‘  ğŸ‘¤ Username:         $rdp_user                â•‘" -ForegroundColor Yellow
          Write-Host "    â•‘  ğŸ”‘ Password:         $rdp_pass                â•‘" -ForegroundColor Yellow
          Write-Host "    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor White
          Write-Host ""

          Write-Host "ğŸ“± HÆ°á»›ng dáº«n káº¿t ná»‘i:" -ForegroundColor Cyan
          Write-Host "   â€¢ Má»Ÿ Microsoft Remote Desktop"
          Write-Host "   â€¢ Add PC â†’ DÃ¡n Address (cÃ³ cáº£ port)"
          Write-Host "   â€¢ Username: HEROGOODBOYVN"
          Write-Host "   â€¢ Password: Nguyen2009"
          Write-Host "   â€¢ Connect â†’ Chill nghe nháº¡c ngay boss Æ¡i!"
          Write-Host ""

          Write-Host "ğŸ’ MÃ¡y Ä‘Ã£ Ä‘Æ°á»£c tá»‘i Æ°u riÃªng bá»Ÿi HEROGOODBOYVN - siÃªu mÆ°á»£t!" -ForegroundColor Magenta
          Write-Host "â° Tá»± táº¯t sau $running_time giá»."
          Write-Host ""
          Write-Host "        ğŸ‰ CHÃšC BOSS CONNECT THÃ€NH CÃ”NG, CHILL MAX! ğŸ‰" -ForegroundColor Magenta
          Write-Host "                   MÃ¡y Chá»§ Premium by HEROGOODBOYVN âœ¨"
          Write-Host ""

      - name: Giá»¯ mÃ¡y chá»§ hoáº¡t Ä‘á»™ng
        run: |
          \( hours = " \){{ inputs.run_hours || 1 }}"
          echo "MÃ¡y chá»§ premium Ä‘ang cháº¡y $hours giá»... VÃ o RDP vá»›i username HEROGOODBOYVN chill Ä‘i boss! ğŸš€ğŸ¶"
          Start-Sleep -Seconds ${{ (inputs.run_hours || 1) * 3600 }}
