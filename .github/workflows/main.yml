name: MÃY CHá»¦ PREMIUM Cá»¦A HEROGOODBOYVN

on:
  workflow_dispatch:
    inputs:
      run_hours:
        description: 'Chá»n thá»i gian cháº¡y (1-6 giá»)'
        required: true
        type: choice
        options: ['1', '2', '3', '4', '5', '6']
        default: '3'

jobs:
  premium-rdp:
    runs-on: windows-latest
    timeout-minutes: 390  # Max 6 giá» + dÆ°

    steps:
      - name: Táº£i Ngrok
        run: |
          Invoke-WebRequest https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-windows-amd64.zip -OutFile ngrok.zip
          Expand-Archive ngrok.zip -DestinationPath .
          .\ngrok.exe authtoken ${{ secrets.NGROK_AUTH_TOKEN }}

      - name: Báº­t RDP + Táº¡o User + Tá»‘i Æ¯u MÆ°á»£t Max
        run: |
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server' -Name "fDenyTSConnections" -Value 0
          Enable-NetFirewallRule -DisplayGroup "Remote Desktop"

          net user HEROGOODBOYVN ${{ secrets.RDP_PASSWORD || 'Nguyen2009' }} /add
          net localgroup administrators HEROGOODBOYVN /add
          net localgroup "Remote Desktop Users" HEROGOODBOYVN /add

          powercfg -setactive SCHEME_MIN
          Set-ItemProperty -Path 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Themes\Personalize' -Name "EnableTransparency" -Value 0
          Set-ItemProperty -Path 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced' -Name "TaskbarAnimations" -Value 0
          Stop-Service SysMain, DiagTrack -Force -ErrorAction SilentlyContinue

      - name: Khá»Ÿi Äá»™ng Tunnel & ThÃ´ng Tin Káº¿t Ná»‘i Äáº¹p Lung Linh
        run: |
          Start-Process -WindowStyle Hidden -FilePath ".\ngrok.exe" -ArgumentList "tcp 3389"

          Write-Host "ğŸŒŒâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨ğŸŒŒ" -ForegroundColor Cyan
          Write-Host "      ğŸ”¥ MÃY CHá»¦ PREMIUM HEROGOODBOYVN ONLINE! ğŸ”¥      " -ForegroundColor Magenta
          Write-Host "   ğŸ‘‘ Thá»i gian cháº¡y: ${{ inputs.run_hours }} giá» siÃªu mÆ°á»£t! ğŸ‘‘   " -ForegroundColor Yellow
          Write-Host "ğŸŒŒâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨ğŸŒŒ" -ForegroundColor Cyan
          Write-Host ""

          Write-Host "   Äang chá» ngrok khá»Ÿi Ä‘á»™ng tunnel (60 giÃ¢y + retry Ä‘á»ƒ cháº¯c Äƒn)..."

          Start-Sleep -Seconds 60

          $addr = ""
          for ($i = 1; $i -le 3; $i++) {
            try {
              $tunnel = Invoke-RestMethod http://localhost:4040/api/tunnels -ErrorAction Stop
              $addr = ($tunnel.tunnels | Where-Object proto -eq "tcp").public_url -replace "tcp://",""
              if ($addr) { break }
            } catch {}
            Write-Host "   Retry láº¥y address láº§n $i..."
            Start-Sleep -Seconds 20
          }

          if (-not $addr) {
            Write-Host "Lá»–I: KhÃ´ng láº¥y Ä‘Æ°á»£c tunnel - Check token ngrok má»›i nháº¥t!"
            exit 1
          }

          Write-Host ""
          Write-Host "   ğŸ® THÃ”NG TIN Káº¾T Ná»I PREMIUM (copy nguyÃªn dÃ²ng dÆ°á»›i): ğŸ®"
          Write-Host "   $addr"
          Write-Host ""
          Write-Host "   Username: HEROGOODBOYVN"
          Write-Host "   Password: Nguyen2009"
          Write-Host ""
          Write-Host "   DÃ¹ng Microsoft Remote Desktop / Windows App trÃªn Ä‘iá»‡n thoáº¡i hoáº·c PC"
          Write-Host "   Náº¿u cáº£nh bÃ¡o chá»©ng chá»‰ â†’ Nháº¥n Continue lÃ  vÃ o ngay!"
          Write-Host ""
          Write-Host "        ğŸ‰ CHÃšC Má»ŒI NGÆ¯á»œI CHÆ I WINDOWS VUI Váºº! ğŸ‰" -ForegroundColor Magenta
          Write-Host "                   Powered by HEROGOODBOYVN Premium âœ¨ğŸš€"
          Write-Host ""

          Start-Sleep -Seconds ${{ inputs.run_hours * 3600 }}
