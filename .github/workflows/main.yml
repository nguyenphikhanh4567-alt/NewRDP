name: MÃY CHá»¦ PREMIUM Cá»¦A HEROGOODBOYVN

on:
  workflow_dispatch:
    inputs:
      run_hours:
        description: 'Chá»n thá»i gian mÃ¡y chá»§ cháº¡y (1-6 giá»)'
        required: true
        type: choice
        options: ['1', '2', '3', '4', '5', '6']
        default: '1'

jobs:
  premium-rdp-server:
    name: ğŸš€ MÃ¡y Chá»§ Premium HEROGOODBOYVN - Windows 11 Style RDP
    runs-on: windows-latest
    timeout-minutes: ${{ (inputs.run_hours || 1) * 60 }}

    env:
      ORIGINAL_OWNER: HEROGOODBOYVN
      RDP_USERNAME: HEROGOODBOYVN  # Username chÃ­nh chá»§!

    steps:
      - name: Khá»Ÿi Äá»™ng MÃ¡y Chá»§ Premium
        run: |
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "   MÃY CHá»¦ PREMIUM CHÃNH CHá»¦: $env:ORIGINAL_OWNER   "
          echo "   Thá»i gian cháº¡y: ${{ inputs.run_hours || 1 }} giá»   "
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

      - name: Táº£i vÃ  cÃ i Ngrok (tunnel RDP)
        run: |
          Invoke-WebRequest https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-windows-amd64.zip -OutFile ngrok.zip
          Expand-Archive ngrok.zip -DestinationPath .
          .\ngrok\ngrok.exe authtoken ${{ secrets.NGROK_AUTH_TOKEN }}

      - name: Báº­t Remote Desktop & Tá»‘i Æ¯u Hiá»‡u Suáº¥t
        run: |
          # Báº­t RDP
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server' -Name "fDenyTSConnections" -Value 0
          Enable-NetFirewallRule -DisplayGroup "Remote Desktop"
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -Name "UserAuthentication" -Value 1

          # Táº¡o/TÃ¹y chá»‰nh user chÃ­nh chá»§ HEROGOODBOYVN
          $username = "$env:RDP_USERNAME"
          \( password = " \){{ secrets.RDP_PASSWORD || 'Nguyen2009' }}"

          # Náº¿u user chÆ°a tá»“n táº¡i thÃ¬ táº¡o má»›i, náº¿u cÃ³ rá»“i thÃ¬ Ä‘á»•i password
          if (-Not (Get-LocalUser -Name $username -ErrorAction SilentlyContinue)) {
            New-LocalUser -Name $username -Password (ConvertTo-SecureString $password -AsPlainText -Force) -FullName "HEROGOODBOYVN Premium" -Description "Chá»§ mÃ¡y chá»§ premium"
            Add-LocalGroupMember -Group "Administrators" -Member $username
            Add-LocalGroupMember -Group "Remote Desktop Users" -Member $username
            echo "ÄÃ£ táº¡o user premium: $username"
          } else {
            net user $username $password
            echo "ÄÃ£ cáº­p nháº­t password cho user $username"
          }

          # Tá»‘i Æ°u hiá»‡u suáº¥t
          powercfg -setactive SCHEME_MIN
          Set-ItemProperty -Path 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Themes\Personalize' -Name "EnableTransparency" -Value 0
          Set-ItemProperty -Path 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced' -Name "TaskbarAnimations" -Value 0
          Stop-Service -Name "SysMain" -Force -ErrorAction SilentlyContinue
          echo "ÄÃ£ tá»‘i Æ°u hiá»‡u suáº¥t - mÃ¡y cháº¡y siÃªu mÆ°á»£t!"

      - name: Khá»Ÿi cháº¡y Ngrok & Hiá»ƒn Thá»‹ ThÃ´ng Tin Káº¿t Ná»‘i
        run: |
          Start-Process -FilePath ".\ngrok\ngrok.exe" -ArgumentList "tcp 3389 --log=stdout" -NoNewWindow
          echo "Äang táº¡o káº¿t ná»‘i an toÃ n... Chá» chÃºt nha boss! ğŸš€"
          Start-Sleep -Seconds 20

          $tunnel = Invoke-RestMethod http://localhost:4040/api/tunnels
          $public_url = ($tunnel.tunnels | Where-Object { $_.proto -eq "tcp" }).public_url
          $host_port = $public_url -replace 'tcp://', ''
          $rdp_user = "$env:RDP_USERNAME"
          \( rdp_pass = " \){{ secrets.RDP_PASSWORD || 'Nguyen2009' }}"
          \( running_time = " \){{ inputs.run_hours || 1 }}"

          Write-Host ""
          Write-Host "ğŸŒŒâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨ğŸŒŒ" -ForegroundColor Cyan
          Write-Host "   ğŸ”¥ MÃY CHá»¦ PREMIUM CHÃNH CHá»¦: HEROGOODBOYVN ğŸ”¥   " -ForegroundColor Magenta
          Write-Host "   ğŸ® Server tá»± xÃ¢y dá»±ng & tá»‘i Æ°u hoÃ n toÃ n! ğŸ®   " -ForegroundColor Yellow
          Write-Host "ğŸŒŒâœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨âœ¨ğŸŒŒ" -ForegroundColor Cyan
          Write-Host ""

          Write-Host "    ğŸ‘‘ CHá»¦ Sá» Há»®U: $env:ORIGINAL_OWNER ğŸ‘‘" -ForegroundColor Yellow
          Write-Host "         â±ï¸  Thá»i gian hoáº¡t Ä‘á»™ng: $running_time giá»" -ForegroundColor Green
          Write-Host ""

          Write-Host "          ğŸ®ğŸ”¥ THÃ”NG TIN Káº¾T Ná»I ğŸ”¥ğŸ®" -ForegroundColor Cyan
          Write-Host "    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—" -ForegroundColor White
          Write-Host "    â•‘  ğŸ“ Address (Host):   $host_port          â•‘" -ForegroundColor Yellow
          Write-Host "    â•‘  ğŸ‘¤ Username:         $rdp_user                â•‘" -ForegroundColor Yellow
          Write-Host "    â•‘  ğŸ”‘ Password:         $rdp_pass                â•‘" -ForegroundColor Yellow
          Write-Host "    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•" -ForegroundColor White
          Write-Host ""

          Write-Host "ğŸ“± HÆ°á»›ng dáº«n káº¿t ná»‘i:" -ForegroundColor Cyan
          Write-Host "   â€¢ Má»Ÿ Microsoft Remote Desktop"
          Write-Host "   â€¢ Add PC â†’ DÃ¡n Address vÃ o"
          Write-Host "   â€¢ Username: HEROGOODBOYVN"
          Write-Host "   â€¢ Password: Nguyen2009 (máº·c Ä‘á»‹nh)"
          Write-Host "   â€¢ Connect â†’ VÃ o mÃ¡y chá»§ premium chÃ­nh chá»§ ngay!"
          Write-Host ""

          Write-Host "ğŸ’ MÃ¡y Ä‘Ã£ Ä‘Æ°á»£c tá»‘i Æ°u riÃªng bá»Ÿi HEROGOODBOYVN - siÃªu nháº¹, siÃªu mÆ°á»£t!" -ForegroundColor Magenta
          Write-Host "â° Tá»± Ä‘á»™ng táº¯t sau $running_time giá» Ä‘á»ƒ tiáº¿t kiá»‡m tÃ i nguyÃªn."
          Write-Host ""
          Write-Host "        ğŸ‰ CHÃšC Má»ŒI NGÆ¯á»œI CHÆ I VUI, NGHE NHáº C CHILL! ğŸ‰" -ForegroundColor Magenta
          Write-Host "                   MÃ¡y Chá»§ Premium by HEROGOODBOYVN âœ¨"
          Write-Host ""

      - name: Giá»¯ mÃ¡y chá»§ hoáº¡t Ä‘á»™ng Ä‘áº¿n háº¿t thá»i gian
        run: |
          \( hours = " \){{ inputs.run_hours || 1 }}"
          echo "MÃ¡y chá»§ premium cá»§a HEROGOODBOYVN Ä‘ang cháº¡y á»•n Ä‘á»‹nh $hours giá»..."
          echo "VÃ o RDP vá»›i username HEROGOODBOYVN Ä‘á»ƒ chill nha boss! ğŸš€ğŸ¶"
          Start-Sleep -Seconds ${{ (inputs.run_hours || 1) * 3600 }}
